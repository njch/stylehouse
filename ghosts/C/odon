name: code
include: T/ravel T/braid
chains:
 - K: 'stylefile'#c
   Ki: 'styledir'
   arr_if: |
     -d "$thing/lib" && -d "$thing/ghosts"
   foreach_travel:
     glob: |
       "$thing/style*", "$thing/not"
     find_files: |
       #"$thing/lib",
       "$thing/ghosts"
     grep: |
         !/T|H/
   y:
     w: 
       event: |
        L.t.="bahlah";
        Say "Cahgned L.t";
     t:
       event: |
         G.U.mk->(Codon => { stylefile=>L.t });
     
 - K: 'C load'
   Ki: 'Codon'
   arr_if: |
     G.i.K eq "Codon"
   D: |
     my $C = G.i;
     my $code = $H->slurp(C.B.stylefile) if C.B.stylefile;
     $code = C.B.code if C.B.code;
     G.t = [ map { s/\n$//s; $_ } split "\n", $code ];
   s:
     yt: 
    
 - K: 'yaml'
   arr_if: |
     -f $thing && $thing =~ /odon/ && 0;
   foreach_travel:
     each: Way::load_yaml($thing);
dials:
  max_depth: 3
hooks:

  event: |
    G.L = $L;
    my $y = uyL.i.B.K;
    $G->w("y/$y/event", $ar, L.i);
    w uxd;
  figure_some_chain: |
    if (c.D) {
        $G->doo(c.D, {});
        return 1;
    }
    return 0;
  uxd: |
    G.ux->w('ux', {Ls=>$G->W->CS});
    $Ly->w(somewhere => {thing => $ar});
  ways:
    Codon:
      K: Codon
    
  events:
    - K: Codon
      Ei: stylefile y t
      uxL:
          Bn: t
        
  
  Earr: |
    # scan events etc.
  

