R_Jz:
 - K: ein/dire #c takeover J
   D: |
     my $r = {i=>$i, t=>[], sc=>{ou=>'dire'}};
     Rw inness $J $r;
 - K: ein/image #c
   D: |
     my $r = {i=>$i, t=>[], sc=>{ou=>'image'}};
     Rw inness $J $r;
 - K: ein/youtube #c
   D: |
     my $r = {i=>$i, t=>[], sc=>{ou=>'youtube'}};
     Rw inness $J $r;
 - K: ou/dire #c # LOOK FOR KNOWNS, scoped in wormhole
   D: |
     die 'ref' if ref $u;
     -d $u || die "not found: $u pwd=".`pwd`;
     
     my @ma = glob("'$u/*'");
     for my $f (@ma) {
         $H->fixutf8($f);
         my $s = $f;
         $s =~ s/^$u\///;
         my $r = {r=>$s,s=>$s};
         # light pat, or emblem to fly through
         r.c.path = "!pat/dire:/r.r";
         r.c.pi = 'dire';
         r.c.file = $f;
         push @{o.r}, $r;
         if (@{o.r} >= $thi) {
             o.more = @ma - @{o.r};
             last;
         }
     }
 - K: ou/image #c
   D: |
     -f $u || die 'not file';
     
     my $j = x.j;
     #Rw cruxal $x lala wagga;
     my $r;
     r.r = $u;
     r.s = $u;
     r.c.path = "!nowhere";
     r.c.pi = 'image';
     r.c.file = $u;
     push @{o.r}, $r;
 - K: pat/dire #c pat a physical, in a directory
   D: |
     my $ex = join ' ', @$m;
     my $ul = J.onei.i.$ex;
     if (-d $ul) {
         J.onei.i = $ul
     }
     elsif (-f $ul) {
         w demux[$J];
         my $J = Rw jin mash;
         # & over there
         Rw ein/image $J $i:ul;
     }
     else{ die "no see $ul" }
 - K: globdir #c
   D: |
     my @ma = glob("'$file/*'");
     my @r;
     for my $f (@ma) {
         $H->fixutf8($f);
         my $r;
         r.full = $f;
         $f =~ s/^$file\///;
         r.r = $f;
         push @r, $r;
     }
     @r;
 - K: pi/dire #c
   D: |
     my $x = J.d.g.x;
     my $dir = x.j.s;
     
     my $sc = {};
     my $file = "$dir/$u";
     if (-d $file) {
         my $dsc = {co=>'22f',fs=>30,ab=>1,left=>'-1em'};
         my $s = '/';
         Rw wtf $J dir 0.2 $s $sc:dsc;
         sc.sha = '3 5 4 22a';
         if (J.fop->()) {
             my @r = Rw globdir $file;
             my $sc = {co=>'33f',sha=>'3 3 5 fff', ml=>'0.5em'};
             for my $r (@r) {
                 my $c = {s=>$r,pi=>'dierfi'};
                 Rw wtf $J $t:r.r $c $sc;
             }
             #die "$file oooooooooooo";
         }
     }
     elsif (-f $file && J.cv >= 0.3) {
         my $sc;
         sc.opa = 0.5;
         
         my $sp = x.imspin++;
         x.imspin = 0 if $sp > 3;
         sc.left = (($sp * 5)-4).'em';
         sc.top = '-5em';
         sc.rad = 0.4;
         sc.sat = 5;
             
         Rw pi/thumbnail $file $J $sc;
     }
     else {
         Rw wtf wtf 1 $J;
     }
     
     # if J.d.c.n ? notes and stuff
     
     
     #my $emb = 'ðŽ˜' if -d $-
 - K: pi/dierfi #c
   D: |
     my $sc;
     sc.ml = '2em';
     Rw wtf + name $s:u.r $sc;
     
     if (-d u.full) {
         my ($hc,$hs);
         hc.s = '/';
         hs.co = 'afa';
         hs.sha = '3 3 4 af8';
         Rw wtf + type $c:hc $sc:hs;
     }
     
 - K: pi/image #c
   D: |
     my $file = $u;
     -f $file || die;
     my $sc;
     sc.width = "44em";
     sc.height = "27em";
     sc.hue = 36;
     sc.con = 6;
     sc.left = "0em";
     J.d.sc.mw = "20em";
     #die wdump 2, $J;
     Rw pi/thumbnail $file $J $sc;
 - K: pi/thumbnail #c image/video
   D: |
     my $size = -s $file;
     return unless $file =~ /jpe?g$/i;
     my $mou = "public/";
     #return if $size > 3_000_000;
     my ($first) = split '/', $file;
     die "$first not $mou?" unless -e "$mou$first";
     
     my $thl = "th/$file";
     my $th = "$mou$thl";
     
     # TODO mod slowness
     # make this thumbnail J even more forky than usual
     # TODO wander 90deg radial over phatness...
     # tape twist effect coming from somewhere
     
     if (!-f $th && J.fop->()) {
         sayyl " thumbnail++$file";
         my $thd = $1 if $th =~ /^(.+)\/(.+)$/ || die $th;
         if (!-d $thd) {
             run 'mkdir', '-p', $thd;
         }
         if ($file =~ /(mov|avi|mp4)$/i) {
             run 'ffmpegthumbnailer -s 420 -t 20% -i '.$file.' -o '.$th
         }
         else {
             run 'convert', $file, '-thumbnail','500x500', $th
         }
     }
     if (-f $th) {
         my $sc = {
             tag => 'img',
             zom=>{at => {src => $thl}},
             width=>'27em',
             height=>'27em',
             ab=>1,
             zi=>2,
             %{ar.sc||{}}
         };
         my $s = "";
         Rw wtf $J yowl 3 $s $sc;
     }
     delete J.mod.sc.over;
     #J.mod.sc.bgi = $thl;

