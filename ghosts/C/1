R_Jz:
 - K: ein/dire #c takeover J
   D: |
     my $r = {i=>$i, t=>[], sc=>{ou=>'dire'}};
     Rw inness $J $r;
 - K: ein/image #c
   D: |
     my $r = {i=>$i, t=>[], sc=>{ou=>'image'}};
     Rw inness $J $r;
 - K: ou/dire #c
   D: |
     die 'ref' if ref $u;
     -d $u || die "not found: $u pwd=".`pwd`;
     
     my @ma = glob("'$u/*'");
     for my $f (@ma) {
         $H->fixutf8($f);
         my $r;
         r.r = $f;
         r.r =~ s/^$u\///;
         r.s = r.r;
         r.c.path = "!pat/dire:/r.r";
         r.c.pi = 'dire';
         r.c.file = $f;
         push @{o.r}, $r;
         if (@{o.r} >= $thi) {
             o.more = @ma - @{o.r};
             last;
         }
     }
 - K: ou/image #c
   D: |
     -f $u || die 'not file';
     
     my $j = x.j;
     #Rw cruxal $x lala wagga;
     my $r;
     r.r = $u;
     r.s = $u;
     r.c.path = "!nowhere";
     r.c.pi = 'image';
     r.c.file = $u;
     push @{o.r}, $r;
 - K: pat/dire #c
   D: |
     my $ex = join ' ', @$m;
     my $ul = J.onei.i.'/'.J2.u;
     if (-d $ul) {
         J.onei.i = $ul
     }
     else {
         my $J = Rw jin ash;
         Rw ein/image $J $i:ul;
     }
 - K: pi/dire #c
   D: |
     my $x = J.mod.c.X;
     my $r = J.mod.c.L;
     my $dir = x.j.s;
     
     
     my $sc = {};
     my $file = "$dir/$u";
     if (-d $file) {
         my $dsc = {co=>'22f',fs=>20};
         my $s = '/';
         Rw wtf $J dir 0.2 $s $sc:dsc;
         sc.sha = '3 5 4 22a';
     }
     
     Rw wtf $J thing 1 $s:u $sc;
     
     if (-f $file && J.cv >= 0.5) {
         Rw pi/thumbnail $file $J;
     }
     
     #my $emb = '𐎘' if -d $-
 - K: pi/image #c
   D: |
     my $file = $u;
     -f $file || die;
     J.mod.sc.width = "44em";
     J.mod.sc.height = "44em";
     J.mod.sc.mw = "20em";
     Rw pi/thumbnail $file $J;
 - K: pi/thumbnail #c image/video
   D: |
     my $size = -s $file;
     sayyl "Size: $file : $size";
     return unless $file =~ /jpe?g$/i;
     #return if $size > 3_000_000;
     my $ava = $1 if $file =~ /^public\/i\/(.+)$/;
     $ava || die "Not visibi? $file";
     my $thl = "th/$ava";
     my $th = "public/$thl";
     my $thd = $1 if $th =~ /^(.+)\/(.+)$/ || die $th;
     
     # TODO mod slowness
     # make this thumbnail J even more forky than usual
     
     run 'mkdir', '-p', $thd unless -d $thd;
     
     run 'convert', $file, '-thumbnail','300x300', $th unless -f $th;
     #ffmpegthumbnailer -s 420 -t 20% -i MVI_2406.MOV -o sgihed.jpg && display sgihed.jpg
     
     my $x = J.mod.c.X;
     my $sp = x.imspin++;
     x.imspin = 0 if $sp > 3;
     my $sp = ($sp * 5).'em';
     my $sc = {
         tag => 'img',
         zom=>{at => {src => $thl}},
         width=>'7em',
         height=>'7em',
         left => $sp,
         ab=>1,
         rad=>0.4,
     };
     delete J.mod.sc.over;
     my $s = "";
     Rw wtf $J yowl 3 $s $sc;
     #J.mod.sc.bgi = $thl;

