hooks:
  node:
    O: #c
      - GAK: S/O
    o: #c
      - GAK: o S/o
    C: #c
      - GAK: C2 J W C Z A
      
      
    K: #c
      - GAK: CK J W C Z
      
      
    cnon: #c
      - GAK: sul C/uo
        P:
            - GAK: D
              InC:
                   W:
                     styles: OxO z NZ
                     Z:
                       z-index: 5
                       overflow: hidden
                       background: url(i/jellyfish-6.jpg)
            - K: Ims
              flo: 4
              B:
                dir: /s/public/i
    C2: #c
      - GAK: C2 C J M
    somo:
      - GAK: sul C/uo
        P:
            - GAK: D
              InC:
                   W:
                     styles: OxO z NZ
                     Z:
                       z-index: 5
                       overflow: hidden
                       background: url(i/jellyfish-6.jpg)
            - K: Ims
              flo: 4
              B:
                dir: /s/public/i
    D: #c
      - GAK: C J M W C
    some:
      - GAK: sul C/ool
        P:
            - K: Ims
              flo: 4
              B:
                dir: /s/public/i
            - GAK: U
              InC:
                   W:
                     styles: OxO z NZ
                     Z:
                       z-index: 5
                       overflow: hidden
                       background: url(i/future-games-fractal.jpg)
    S2: #c
      - GAK: sul C/ool
        P:
            - K: Ims
              flo: 4
              B:
                dir: /s/public/i
            - GAK: U
              InC:
                   W:
                     styles: OxO z NZ
                     Z:
                       z-index: 5
                       overflow: hidden
                       background: url(i/aloe-vera-1045_640.jpg)
    S: #c
       - GAK: bacg C/ool M
         P:
          - K: Ims
            flo: 2
            B:
              dir: /s/public/i
    5: #c
       - GAK: bacg C/ool M
         P:
          - K: Ims
            flo: 2  
            B:
              dir: /s/public/i
    SS: #c
       - GAK: bacg C/ool M
         P:
          - K: Ims
            flo: 2
            B:
              dir: /s/public/i
    S5: #c
       - GAK: bacg C/ool M
         P:
          - K: Ims
            flo: 2
            B:
              dir: /s/public/i
    5S: #c
       - GAK: bacg C/ool M
         P:
          - K: Ims
            flo: 2
            B:
              dir: /s/public/i
    s: #c
       - GAK: sl C/ool
         P:
          - K: Ims
            flo: 2
            B:
              dir: /s/public/i
          - GAK: U
            InC:
                 W:
                   styles: OxO z NZ
                   Z:
                     z-index: -1
                     background: url(i/greencush.jpg)
    Z: #c
      - GAK: 0 0
      - D: |
          H.nosuddendeath = 1;
      - D: | # gitdission
          $G->recur(0.4, sub {
              w gitdission;  
          });
  in: |
    if (H.name ne 'o') {
        w hostinfo;
    }
    $G->recur(6 => sub {
        w hostinfo;
    });
  hostinfo: | # REname Hostinfo, polari
    #my @ps = `ps -p$$ fu`; # j right
    #my ($u, $pid, $mem, $cpu) = (split /\s+/, $ps[1])[0,1,2,3];
    my $hol = H.ol ||= "H.style/H.name/H.id";
    my $info;
    #info.cpu = $cpu;
    #info.mem = $mem;
    info.now = hitime;
    info.hol = $hol;
    info.pid = $$;
    info.begin = H.uptime ||= hitime;
    
    saygr "hostinfo: $info " if rand(1) > 0.7;
    
    # TODO some Purs have core v
    
    $G->tai("H/$hol", $info);
    
    $G->pub("Hostinfo", "info.hol info.now", 'ig');
    
    $G->pub("Hi" => $hol) if !H.lastinfo || ar.withHi;
    
    H.lastinfo = $info;
    
    G.hostinfo_waits++;
    if (G.hostinfo_waits > 1) {
        sayre "hostinfo uncollected";
    }
  S:
    hostinfo: #c
      ack: | #c
        my (@s) = split /\s+/, $m;
        if (rand(1) > 0) {
            my $lag = (1000*sprintf('%.3f',$H->hitime - $s[-1])).'ms';
            saygr "... $lag";
        }
        G.hostinfo_waits = 0;

