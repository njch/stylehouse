
name: hostinfo
hooks:
  load_ways_post: |
    unless (G mess ) {
        G TT ->G("H/mess");
    }
  elvinit: |
    $G->unrush('elvinit') || return;

    $H->init_flood();
    
    my $style = $H->get("sstyle");
    if ($style eq "shed") {
        Git->new($H->intro);
        Codo->new($H->intro);
        Lyrico->new($H->intro);
    }
    else {
        Git->new($H->intro);
        Codo->new($H->intro);
        #Keys->new($hostinfo->intro);
    }

    $H->update_app_menu();
    
    $H->{underworld} = 0;
    # where we pay attention
  data:
    get_apps: |
      my $apps = {};
      my $d = $O->data;
      for (keys %$d) {
          next unless /^[A-Z]\w+$/;
          $apps->{$_} = $d->{$_};
      }
      return $apps;
  throwlog: |
    G mess Tw throwlog(%$ar);
  splatmenues: |
    'db' =>
      sub { 
        Say "WOOHOO! $G->{i}->{G}->{name}";
        $G->{i}->{G}->w('go', {thing => $O->data}); 
      },

    

