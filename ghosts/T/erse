name: wormhole surfer
chains:
 - K: Wormhole #c
   arr_if: |
     $G->{depth} == 0 && ref $thing eq "Wormhole";
   B_: |
     $thing
   foreach_travel:
     each: grep { $_->{depth} == 0 } @{$thing->{script}}
   print: |
        $S->{i}
 
 - K: Line
   arr_if: |
     ($G->{i}->{K} eq "Wormhole"
     || $G->{i}->{K} eq "Line")
     && ref $thing eq "HASH"
     && @{$thing->{o}}
   foreach_travel:
     each: grep { defined $_ } map { $_->{B}->{Li} } @{$thing->{o}};
dials:
hooks:
  aft_arr: |
    my $yL = $thing;
    if ($G->{i}->{K} eq "Line") {
        $G->{depth} = $yL->{depth}; # just for vis...
    }
    $G->susgdb;
    Say join("",("    ")x$thing->{depth}).gpty($yL->{i})." ".gpty($yL->{t});
  max_depth: 1

