name: Styling
chains:
 - K: Wormhole #c        Wormhole [ Lines
   k: ''
   dom_depth: 0
   arr_if: |
     $G->{depth} == 0 && ref $thing eq "Wormhole";
   B_: |
     $thing
   foreach_travel:
     each: @{$thing->{script}}
   print: |
     "yW.$Li->{n}.$Li->{t}->{n}"
   B: 
     s:
       div: 1x2em
        
 - K: Line
   iK: Wormhole
   k: ''
   dom_depth: 1
   arr_if: |
     ref $thing eq 'HASH' && $thing->{uuid} && exists $thing->{t}
   B:
     s:
       div: ...x1
       style_D: |
         my $amo = $Li->{t}->{depth};
         $amo *= 2;
         return ["border-left:${amo}em dashed black", "position:relative", "overflow:hidden"]
   print: |
     "yL.$Li->{n}.$Li->{t}->{n}"
   exude: |
     $thing
     
 - K: WaysIn
   iK: Line
   arr_if: |
     exists $thing->{i}
   exude: |
     $thing->{i}
   B:
     s:
       style:
         - background:rgba(255,50,50,0.2)
         - text-align:right
       content_D: |
         pint($Lo->{t}->{i});
     
 - K: Thing
   iK: Line
   arr_if: |
     exists $thing->{t}
   exude: |
     $thing->{t}
     
 - K: WaysOut
   iK: Line
   arr_if: |
     exists $thing->{o}
   B:
     s:
       style:
        - 'border-bottom:1px solid #fca'
       content_D: |
         my $o = $Li->{t};
         "o[".(0+@$o)
   exude: |
     $thing->{o}
     
 - K: NonRef    #c     Things
   iK: Thing
   arr_if: |
     !ref $thing
   B:
     s:
       content_D: |
         htmlesc($Lo->{t});
       
     
 - K: Ref
   iK: Thing
   arr_if: |
     ref $thing
   B:
     s:
       style:
        - border-bottom:1px solid blue
       content_D: |
         ghostlyprinty($Lo->{t});
dials:
  max_depth: 7
  form: 42
hooks:

  T_end: |
    if ($L->{depth} == 0) {
        if (!$G->{_stylerun}) {
            #$G->{_stylerun} = 1;
            #$G->{chains} = $G->findway('stylerun');
        }
        else {
            delete $G->{_stylerun};
        }
    }
  figure_some_chain: |
    return 0 unless exists $c->{B}->{s} || exists $c->{exude};
    my $oc = $c->spawn;
    if (exists $oc->{exude}) {
        $oc->{travel_this} = $G->doo($oc->{exude}, {%$ar});
    }
    push @{$G->{o}}, $oc;
    return 1;

