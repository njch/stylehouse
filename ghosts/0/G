
name: other stuff...
G:
  - K: head
    styles: bare
    D: |
      package G;
      use strict;
      use utf8;
      use base 'Ghost';
      
  - K: new
    D: |
      my $G = bless {}, shift;
      shift->($G); delete self.hostinfo;
      
      my ($name, $O, @ways) = @_;
      
      G.GGs = []
      G.O = $O; # TODO A
      
      $G->W || die "no Wormhole?";

      my $way = join ", ", @ways;
      G.name = "$name`($way)";
      G.way = $way;
      say "Ghost named G.name";
      
      $G->load_ways(@ways);

      push @{G.O.GGs}, $G if ref G.O =~ /^G/;
      
      return $self;
      
   
hooks:
  any_init: |
    for my $nb (qw'A C G T') {
        my $co = $G->anyway($nb);
        next unless $co;
        my @code
        for my $ch (@$co) {
            my $D = $G->parse_babble(ch.D);
            unless (ch.styles =~ /bare/) {
                $D = "my \$$nb = shift;\n$D" unless ch.styles =~ /func/;
                $D = ind('    ', $D);
                $D = "sub ch.K {\n$D\n}\n";
            }
            $code .= "\n$D";
        }
        $code .= "\n1;\n";
        write_file("l/${nb}.pm", $code);
            
            
        
        
        
        
        
        
        
    }

