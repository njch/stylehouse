
name: the sky
hooks:
  fresh_init: |
    # w< ...etc?
    w colours;
    w ambientness;
  recoded_init: |
      w doof;
  doof: |
    w colourchange(t=>500, c => '00001F');
    w touch;
  ambientness: |
    w colourchange(t=>15000);
    timer 19 { w ambientness };
  colours: |
    $G->{colours} = ['069','77a9a0','6699cF','3366cF',
    '000099','6B8FB2','6699FF','005F6B',
    'a699cF','4C3380',
    '336699','8F00B2', '666699',
    '336aa9','72a699','000099','6B8FB2','6B8FB2','00CCFF','00CCFF'];
  colourchange: |
    $ar->{t} ||= 5000;
    $ar->{c} ||= w rotate_colourwheel;
    $H->JS($H->{sky},"animate({backgroundColor: '#$ar->{c}'}, $ar->{t});");
  touch: |
    $ar->{t} ||= 1000;
    w colourchange;
  rotate_colourwheel: |
    $G->{colours} || w colours;
    my $c = shift @{$G->{colours}};
    push @{$G->{colours}}, $c;
    return $c;
    

