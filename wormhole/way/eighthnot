my ($dir) = J.id =~ /(.)$/;
my $lim = $dir > 6 ? 6 : $dir > 3 ? 5 : 4;
if (J.A.tch++ > $lim) {
    J.A.tch = $lim - 4;
    1
}
else {
    0
}
